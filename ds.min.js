/*! dialog-system by ZHAO Xudong, html5beta.com 2015-01-19 */
!function(a){function b(b){function c(a){var b=this;this.init(a),this.defs.open&&(this.show(),this.defs.timer&&(this.handler=setTimeout(function(){b.hide()},this.defs.timer)))}if(!b)throw new Error("no jquery object!");b.dsOption={indexCounter:250,defaultWidth:200,defaultTimer:4e3,defaultTitle:"Info",defaultTop:40,defaults:{modal:!1,closeText:"close",timer:0,css:{},type:"default",show:"show",showParam:null,hide:"hide",hideParam:null,animateSpeed:0,msg:"",open:!0,title:"",hasCloseBtn:!0,selfDestroy:!1,beforeShow:null,afterShow:null,beforeHide:null,afterHide:null},closeHtml:"&times;",typeHtml:{"default":'<i class="ds-default ds-type-unit"></i>',info:'<i class="ds-info ds-type-unit">i</i>',alert:'<i class="ds-alert ds-type-unit">!</i>',error:'<i class="ds-error ds-type-unit">&Chi;</i>',ok:'<i class="ds-ok ds-type-unit">&radic;</i>'}},c.prototype.init=function(a){var c=this.defs=b.extend({},b.dsOption.defaults,a),d=this.id=(new Date).getTime(),e=this.zIndex=++b.dsOption.indexCounter,f=this;b("body").append('<span style="z-index:'+(e+1)+'" class="ds-wrap ds-type-'+c.dsType+' ds-hide" id="ds-unit-'+d+'">'+(c.title?'<span class="ds-head ds-block"><span class="ds-head-content ds-iblock">'+c.title+"</span>"+(c.hasCloseBtn?'<span class="ds-btn-close ds-close">'+b.dsOption.closeHtml+"</span>":"")+"</span>":"")+'<span class="ds-inner"><span class="ds-content">'+b.dsOption.typeHtml[c.type]+c.msg+"</span></span>"+(c.title?"":c.hasCloseBtn?'<span class="ds-btn-close ds-close">'+b.dsOption.closeHtml+"</span>":"")+"</span>"),this.dom=b("#ds-unit-"+this.id),this.dom.css(c.css),this.dom.on("click",".ds-close",function(){f.hide()}),c.modal&&(b("body").append('<div class="ds-overlay ds-hide" id="ds-overlay-'+d+'" style="z-index:'+e+'"></div>'),this.overlay=b("#ds-overlay-"+this.id))},c.prototype.destroy=function(){this.dom.off("click","**"),this.dom.remove(),this.overlay&&this.overlay.remove(),delete this.defs,delete this.id,delete this.dom,delete this.overlay},c.prototype.showCallback=function(){this.afterShow&&this.afterShow()},c.prototype.hideCallback=function(){this.dom.addClass("ds-hide"),this.afterHide&&this.defs.afterHide.call(th),this.defs.selfDestroy&&this.destroy()},c.prototype.show=function(){var a=this.defs.show,b=this;this.overlay&&this.overlay.removeClass("ds-hide"),this.defs.beforeShow&&this.defs.beforeShow.call(this),"animate"===a?this.dom.removeClass("ds-hide").animate(this.defs.showParam,this.defs.animateSpeed,function(){b.showCallback()}):this.dom.removeClass("ds-hide")[a](this.defs.animateSpeed,function(){b.showCallback()})},c.prototype.hide=function(){var a=this.defs.hide,b=this;this.defs.beforeHide&&this.defs.beforeHide.call(this),this.overlay&&this.overlay.addClass("ds-hide"),"animate"===a?this.dom.animate(this.defs.hideParam,this.defs.animateSpeed,function(){b.hideCallback()}):this.dom[a](this.defs.animateSpeed,function(){b.hideCallback()})},b.ds={},b.ds.ds=function(d,e){var f=b(a),g=f.width(),h=f.height(),i=b("body"),j=(i.height(),f.scrollTop()),k=b.dsOption,d=b.extend({},d),l=d.width?d.width:k.defaultWidth,m="id"+(new Date).getTime(),n=0,o=0,p=0,q={},r=d.type,l=l>g?g:l;return p=(g-l)/2,b.inArray(e.dsType,["dialog","popup"])>-1&&(i.append('<div id="'+m+'" style="position:fixed;left:0;top:0;opacity:0;filter:alpha(opacity=0);z-index:-1"><div style="width:'+l+'px"><div class="ds-content">'+k.typeHtml[r?r:"default"]+d.msg+"</div></div></div>"),n=b("#"+m).height(),b("#"+m).remove(),o=(h-n)/2+j,o=h>n?o:j+20),q=b.extend({top:o,left:p,position:"absolute",width:l},d.css,e.css),new c(b.extend(d,{timer:d.timer||0,type:d.type||"default",msg:d.msg},e,{css:q}))},b.ds.popup=function(a,c,d,e){return b.isPlainObject(a)&&(e=a,a=e.msg,c=e.timer,d=e.type||d),b.ds.ds(b.extend(e,{msg:a,timer:c||0===c?c:b.dsOption.defaultTimer,type:d}),{title:"",selfDestroy:!0,dsType:"popup"})},b.ds.info=function(a,c,d){return b.ds.popup(a,c,"info",d)},b.ds.alert=function(a,c,d){return b.ds.popup(a,c,"alert",d)},b.ds.error=function(a,c,d){return b.ds.popup(a,c,"error",d)},b.ds.ok=function(a,c,d){return b.ds.popup(a,c,"ok",d)},b.ds.dialog=function(a){return a=a||{},a.title=a.title?a.title:b.dsOption.defaultTitle,b.ds.ds(a,{dsType:"dialog"})},b.ds.right=function(a,c,d,e){b.isPlainObject(a)?(e=a,a=e.msg,c=e.timer,d=e.type):e={};var f=b.dsOption,g="id"+(new Date).getTime(),h=0,i=0,j=b("body");return j.append('<div id="'+g+'" style="position:fixed;left:0;top:0;opacity:0;filter:alpha(opacity=0);z-index:-1"><div style="max-width:100%"><span class="ds-content">'+f.typeHtml[d?d:"default"]+a+"</span></div></div>"),h=b("#"+g+" .ds-content").width(),i=b("#"+g+" .ds-content").height(),b("#"+g).remove(),b.ds.ds(b.extend({hasCloseBtn:!1},e,{msg:a,timer:c||0===c?c:b.dsOption.defaultTimer,type:d}),{title:"",modal:!1,selfDestroy:!0,css:{right:-h,left:"auto",position:"fixed",top:e.top||b.dsOption.defaultTop,width:"auto"},animateSpeed:400,show:"animate",showParam:{right:0},hide:"animate",hideParam:{right:-h},dsType:"right"})},b.ds.left=function(a,c,d,e){b.isPlainObject(a)?(e=a,a=e.msg,c=e.timer,d=e.type):e={};var f=b.dsOption,g="id"+(new Date).getTime(),h=0,i=0;return b("body").append('<div id="'+g+'" style="position:fixed;left:0;top:0;opacity:0;filter:alpha(opacity=0);z-index:-1"><div style="max-width:100%"><span class="ds-content">'+f.typeHtml[d?d:"default"]+a+"</span></div></div>"),h=b("#"+g+" .ds-content").width(),i=b("#"+g+" .ds-content").height(),b("#"+g).remove(),b.ds.ds(b.extend({hasCloseBtn:!1},e,{msg:a,timer:c||0===c?c:b.dsOption.defaultTimer,type:d}),{title:"",animateSpeed:400,modal:!1,selfDestroy:!0,css:{right:"auto",left:-h,position:"fixed",top:e.top||40,width:"auto"},show:"animate",showParam:{left:0},hide:"animate",hideParam:{left:-h},dsType:"left"})},b.ds.top=function(a,c,d,e){b.isPlainObject(a)?(e=a,a=e.msg,c=e.timer,d=e.type):e={};var f=b.dsOption,g="id"+(new Date).getTime(),h=0,i=0,j=b("body");return j.append('<div id="'+g+'" style="position:fixed;left:0;top:0;opacity:0;filter:alpha(opacity=0);z-index:-1"><div style="max-width:100%"><span class="ds-content">'+f.typeHtml[d?d:"default"]+a+"</span></div></div>"),h=b("#"+g+" .ds-content").width(),i=b("#"+g+" .ds-content").height(),b("#"+g).remove(),b.ds.ds(b.extend({hasCloseBtn:!1},e,{msg:a,timer:c||0===c?c:b.dsOption.defaultTimer,type:d}),{title:"",animateSpeed:400,modal:!1,selfDestroy:!0,css:{top:-i,left:"50%",right:"auto","margin-left":-(h/2),position:"fixed",width:"auto"},show:"animate",showParam:{top:0},hide:"animate",hideParam:{top:-i},dsType:"top"})}}"function"==typeof define?define(function(require){b(require("jquery"))}):b(jQuery)}(this);